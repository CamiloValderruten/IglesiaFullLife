<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description"
	      content="Presentation platform for Full Life Ministry">
	<meta name="robots" content="noindex">
	<meta name="author" content="Full Life Ministry">
	<title>Presentation | Full Life Ministry</title>
	<link rel="icon" href="/static/favicon.png">
	<link
			 href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
			 rel="stylesheet">
	<style>
		body {
			text-align: center;
			background: black;
			font-family: sans-serif;
			font-weight: 100;
			color: white;
			padding-top: 20%;
		}

		#clockdiv {
			font-size: 100px;
		}

		#title {
			font-size: 50px;
		}
	</style>
</head>

<body>
<div class="main">
	<div id="title">Worship</div>
	<div id="clockdiv">
		<span class="hours"></span>:<span class="minutes"></span>:<span
			 class="seconds"></span>
	</div>
</div>
<div id="buttons">
	<button class="btn btn-primary">Next</button>
</div>

<script
		 src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
<script>
    function getTimeRemaining(endtime) {
        var t = Date.parse(endtime) - Date.parse(new Date());
        var seconds = Math.floor((t / 1000) % 60);
        var minutes = Math.floor((t / 1000 / 60) % 60);
        var hours = Math.floor((t / (1000 * 60 * 60)) % 24);
        return {
            'total': t,
            'hours': hours,
            'minutes': minutes,
            'seconds': seconds
        };
    }

    function getExtraTime(time) {
        console.log(time);
        var data = {};
        data.hours = time.hours;
        data.minutes = time.minutes;
        data.seconds = time.seconds + 1;
        if (data.seconds === 61) {
            data.minutes += 1;
            data.seconds = 0;
        }
        if (data.minutes === 61) {
            data.hours += 1;
            data.minutes = 0;
        }
        return data;
    }

    function initializeClock(id, endtime) {
        var clock = document.getElementById(id);
        var hoursSpan = clock.querySelector('.hours');
        var minutesSpan = clock.querySelector('.minutes');
        var secondsSpan = clock.querySelector('.seconds');

        var done = false;
        var t = {hours: 0, minutes: 0, seconds: 0};

        function updateClock() {
            if (done) { t = getExtraTime(t)
            } else {t = getTimeRemaining(endtime);}
            hoursSpan.innerHTML = ('0' + t.hours).slice(-2);
            minutesSpan.innerHTML = ('0' + t.minutes).slice(-2);
            secondsSpan.innerHTML = ('0' + t.seconds).slice(-2);

            if (t.minutes < 5 && t.hours === 0 && !done) {
                document.body.style.backgroundColor = '#C4C442';
            }

            if (t.minutes === 0 && t.hours === 0 && t.seconds === 0) {
                done = true;
                document.body.style.backgroundColor = '#c4434f';
            }
        }

        updateClock();
        var timeinterval = setInterval(updateClock, 1000);
    }

    {% if events | length > 0 %}
    var deadline = moment().add('{{ events[0].duration.minutes }}', 'minutes').add('{{ events[0].duration.seconds }}', 'seconds');
    initializeClock('clockdiv', deadline);
    {% endif %}

</script>
</body>

{##}
{#-Worship#}
{#-Interlude#}
{#-Preach - 35#}
{#-Ministration#}
{#Offering#}
{#Anuncios#}
